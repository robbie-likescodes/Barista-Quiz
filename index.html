<!-- CREATE (decks merged by name) -->
<section id="view-create" class="view active" aria-labelledby="create-title">
  <h2 id="create-title">Create &amp; Manage Decks</h2>

  <div class="card">
    <div class="card-head">
      <strong>Add / Select a Deck (merged by Deck Name)</strong><div class="grow"></div>
      <button id="renameDeckBtn" class="btn ghost">Rename</button>
      <button id="editDeckMetaBtn" class="btn ghost">Edit Meta</button>
      <button id="deleteDeckBtn" class="btn danger">Delete</button>
      <button id="exportDeckBtn" class="btn">Export</button>
      <button id="importDeckBtn" class="btn">Import…</button>
      <input id="importDeckInput" type="file" accept=".json,.txt" hidden>
    </div>

    <!-- Create or select a deck by Class + Deck Name.
         Decks with the same Class + Deck Name are ONE deck (sub‑decks are just tags). -->
    <div class="grid g2 mt">
      <div>
        <label class="label" for="newClassName">Class</label>
        <input id="newClassName" class="input" list="classNames" placeholder="e.g., Barista Training" autocomplete="off" />
        <datalist id="classNames"></datalist>
      </div>
      <div>
        <label class="label" for="newDeckName">Deck (merged by name)</label>
        <input id="newDeckName" class="input" list="deckNames" placeholder="e.g., Hot Drinks" autocomplete="off" />
        <datalist id="deckNames"></datalist>
      </div>
    </div>

    <!-- Add/select sub‑deck as a tag within the selected Deck (does NOT create a new Deck). -->
    <div class="grid g2 mt">
      <div class="subcat-wrap">
        <button id="toggleSubdeckBtn" class="btn ghost small" aria-controls="newSubdeck" aria-expanded="false">+ Sub‑deck (optional)</button>
        <input id="newSubdeck" class="input hidden" placeholder="e.g., Latte Art">
      </div>
      <div class="mt-sm"><button id="addDeckBtn" class="btn primary">Create / Select Deck</button></div>
    </div>

    <!-- Select existing deck by name (deduped). Adding cards here appends to that single deck. -->
    <div class="mt select-wrap">
      <label class="label" for="deckSelect">Pick Existing Deck (by Name)</label>
      <select id="deckSelect" class="input" aria-label="Pick Deck (by Name)"></select>
      <div id="deckMeta" class="hint mt-sm">
        <span id="deckMetaTitle"></span>
        <div id="deckMetaSubs" class="micro"></div>
      </div>
    </div>
  </div>

  <details class="card">
    <summary class="card-head">Bulk Add (tap for format)</summary>
    <div class="mt-sm"><button id="bulkSummaryBtn" class="btn ghost small">Show format</button></div>
    <textarea id="bulkTextarea" class="textarea mt" rows="5"
      placeholder="Question | Correct | Wrong1 | Wrong2 | Wrong3 | #Sub‑deck(optional)"></textarea>
    <div class="mt"><button id="bulkAddBtn" class="btn primary">Add to Deck</button></div>
  </details>

  <div class="card">
    <h3>Add / Edit Card</h3>
    <div class="grid g2 mt">
      <input id="qInput" class="input" placeholder="Question" aria-label="Question">
      <input id="aCorrectInput" class="input" placeholder="Correct answer" aria-label="Correct answer">
      <input id="aWrong1Input" class="input" placeholder="Wrong answer 1 (required)" aria-label="Wrong answer 1">
      <input id="aWrong2Input" class="input" placeholder="Wrong answer 2 (optional)" aria-label="Wrong answer 2">
      <input id="aWrong3Input" class="input" placeholder="Wrong answer 3 (optional)" aria-label="Wrong answer 3">
      <input id="cardSubInput" class="input" placeholder="Card sub‑deck (optional)" aria-label="Card sub-deck">
    </div>
    <div class="mt"><button id="addCardBtn" class="btn primary">Save Card</button></div>

    <!-- Optional: quick view/manage sub‑decks for the selected deck (deduped) -->
    <details class="mt card" id="subdeckManager" open>
      <summary class="card-head">Sub‑decks in this Deck</summary>
      <div id="subdeckManagerList" class="chips mt"></div>
      <div class="grid g2 mt">
        <input id="subdeckNewName" class="input" placeholder="Add new sub‑deck (tag)">
        <button id="createSubdeckBtn" class="btn">Add Sub‑deck</button>
      </div>
    </details>
  </div>

  <div class="card">
    <h3>Cards in Deck</h3>
    <div id="cardsList" class="list" aria-live="polite"></div>
  </div>
</section>
